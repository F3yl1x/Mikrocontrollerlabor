#include "msp430.h"
#include "hal\hal_lcd.h"


int main(void) {
    WDTCTL = WDTPW | WDTHOLD;

    halLcdInit();
    halLcdBackLightInit();
    halLcdSetBackLight(46);
    halLcdSetContrast(95);

    P1DIR |= 0b11; //Port 1.0 als Ausgang
    P1OUT &= ~0b11; //Port 1.0 Ausschalten

    P2IE  = 0b00000000; //Interrupt Port2 ausschalten
    P2DIR = 0b00000000; //Port 2 als Eingang
    P2OUT = 0b00111110; //Port 2.6 Eingang mit Pull-Up
    P2REN = 0b11111111; //Port 2 Eingänge grounden
    P2IES = 0b00111110; //Port 2.6 auf steigende Flanke

    P2IFG = 0b00000000; //Interrupt Flag zurücksetzen
    P2IE  |= 0b00111110; //Interrupts aktivieren für Port 2.6

	__bis_SR_register(LPM4_bits + GIE); // Globale Interruptfreigabe + Energiesparen
}


const char* Texte[]={"Einstellungen","Telefonbuch","Anrufe","Klingelton", "Lautstaerke",
					 "Seppi", "Karl Heinz","Carlo", "24.03.21", "Tutut","BeepBeep",
					 "0 Prozent","50 Prozent","100 Prozent","0162-123235","0163-143235",
					 "07243-123665","07212-213665","Zurueck"};
int Select[][4]= { {0,1,2,-1}, {3,4,18,-1}, {5,6,18,-1},{7,8,18,-1}};

signed int Page = 1;
signed int PagePos = 1;
int size;
char js;


void PrintMenue(char JS)
{

    halLcdClearScreen();

    halLcdPrintLine("Auswahl:",0,0);

    size = (sizeof(Select[Page])/sizeof(Select[Page][1]))-1;

    if(JS=='o')
    {
    	if(PagePos > 0)
    	{
    		PagePos --;
    	}
    }
    
    if(JS=='u')
        {
        	if(Select[Page][PagePos] > -1)
        	{
        		PagePos ++;
        	}
        }
    
    if(JS=='l')
            {
            	if(Page > 0)
            	{
            		Page --;
            	}
            }
    if(JS=='l')
                {
                	if(Page < 3)
                	{
                		Page ++;
                	}
                }
    
    for
    
    
}


__attribute__((interrupt(PORT2_VECTOR)))
void PORT2_VECTOR_ISR(void)
{
   if((P2IFG == 0b00000010)) //links
   	   {
	   js= 'l';
	   P2IFG &= ~0b00000010;
   	   }

   if((P2IFG == 0b00000100)) //rechts
      {
	   js= 'r';
   	   P2IFG &= ~0b00000100;
      }

   if((P2IFG == 0b00001000)) //mitte
            {
              js= 'm';
              P2IFG &= ~0b00001000;
            }

   if((P2IFG == 0b00010000)) //oben
         {
	   	   js= 'o';
      	   P2IFG &= ~0b00010000;
         }

   if((P2IFG == 0b00100000)) //unten
         {
           js= 'u';
           P2IFG &= ~0b00100000;
         }

   PrintMenue(js);
}
